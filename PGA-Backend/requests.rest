@baseURL = http://192.168.0.244:3000/
@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImFkbWluQGV4YW1wbGUuY29tIiwicGVzc29hX2lkIjoxLCJub21lIjoiQWRtaW4iLCJ0aXBvX3VzdWFyaW8iOiJBZG1pbmlzdHJhZG9yIiwiaWF0IjoxNzY0MDA2NTIzLCJleHAiOjE3NjQwOTI5MjN9.bovdQhHlFpp-imPVhi7kIn8XmWx5JUU8qzN7eD8lw_I
@userID = 1
@regionalId = 1
@unitId = 2
@pgaId = 1
@projectId = 1
@deliverableId = 1
@attachmentId = 1
@themeId = 1
@processStepId = 1

### --------------------------
### AUTH
### --------------------------

### Login (obter token)
POST {{baseURL}}auth/login
Content-Type: application/json

{
	"email": "admin@example.com",
	"senha": "Senh@123"
}

### Listar contexts disponíveis
GET {{baseURL}}auth/contexts
Authorization: Bearer {{token}}

### Selecionar contexto (unidade|regional)
POST {{baseURL}}auth/select-context
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"tipo": "unidade",
	"id": 1
}

### Obter usuário atual
GET {{baseURL}}auth/me
Authorization: Bearer {{token}}

### Refresh token
POST {{baseURL}}auth/refresh
Content-Type: application/json

{
	"refresh_token": "<REFRESH_TOKEN>"
}

### --------------------------
### USERS
### --------------------------

### Criar usuário (público só funciona se não houver usuários no sistema, o primeiro usuário será administrador)
POST {{baseURL}}users
Content-Type: application/json

{
	"nome": "Admin",
	"email": "admin@example.com",
	"senha": "Senh@123",
	"tipo_usuario": "Docente"
}

### Listar usuários
GET {{baseURL}}users
Authorization: Bearer {{token}}

### Buscar usuário por ID
GET {{baseURL}}users/{{userID}}
Authorization: Bearer {{token}}

### Atualizar usuário
PUT {{baseURL}}users/{{userID}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"nome": "Nome Atualizado"
}

### Remover usuário
DELETE {{baseURL}}users/{{userID}}
Authorization: Bearer {{token}}

### Solicitar redefinição de senha (público)
POST {{baseURL}}users/reset-password
Content-Type: application/json

{
	"email": "usuario@fatec.sp.gov.br"
}

### Confirmar redefinição de senha (público)
POST {{baseURL}}users/reset-password/confirm
Content-Type: application/json

{
	"token": "token-temporario",
	"password": "novaSenh@123"
}

### Solicitar acesso (público)
POST {{baseURL}}users/request-access
Content-Type: application/json

{
	"nome": "Fulano",
	"email": "fulano@fatec.sp.gov.br",
	"codigo_unidade": "F301"
}

### Processar solicitação de acesso (aprovador)
POST {{baseURL}}users/process-access-request/1
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"status": "Aprovada",
	"tipo_usuario": "Docente"
}

### Buscar usuários por unidade
GET {{baseURL}}users/by-unidade/{{unitId}}
Authorization: Bearer {{token}}

### Trocar papel/role
PATCH {{baseURL}}users/2/change-role
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"novoTipo": "Regional",
	"unidadeId": {{unitId}}
}

### --------------------------
### UNITS
### --------------------------

### Criar unidade
POST {{baseURL}}unit
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"nome_unidade": "Fatec Votorantim",
	"codigo_fnnn": "F301",
	"regional_id": {{regionalId}}
}

### Listar unidades
GET {{baseURL}}unit
Authorization: Bearer {{token}}

### Buscar unidade por ID
GET {{baseURL}}unit/{{unitId}}
Authorization: Bearer {{token}}

### Atualizar unidade
PUT {{baseURL}}unit/{{unitId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"nome_unidade": "Unidade Atualizada",
	"regional_id": null
}

### Excluir unidade
DELETE {{baseURL}}unit/{{unitId}}
Authorization: Bearer {{token}}

### --------------------------
### REGIONAL
### --------------------------

### Criar regional (Administrador)
POST {{baseURL}}regional
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"nome_regional": "Regional Sorocaba",
	"codigo_regional": "R001",
	"responsavel_id": {{userID}},
	"ativo": true
}

### Listar regionais
GET {{baseURL}}regional
Authorization: Bearer {{token}}

### Listar unidades sob responsabilidade
GET {{baseURL}}regional/unidades
Authorization: Bearer {{token}}

### Listar regional por ID
GET {{baseURL}}regional/{{regionalId}}
Authorization: Bearer {{token}}

### Listar PGAs (regional)
GET {{baseURL}}regional/pgas
Authorization: Bearer {{token}}

### Obter PGA (regional)
GET {{baseURL}}regional/pgas/{{pgaId}}
Authorization: Bearer {{token}}

### Avaliar PGA (regional)
PATCH {{baseURL}}regional/pgas/{{pgaId}}/avaliacao
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"status": "Aprovado",
	"parecer": "PGA aprovado"
}

### Listar projetos (regional)
GET {{baseURL}}regional/projetos
Authorization: Bearer {{token}}

### Obter projeto (regional)
GET {{baseURL}}regional/projetos/{{projectId}}
Authorization: Bearer {{token}}

### Avaliar projeto (regional)
PATCH {{baseURL}}regional/projetos/{{projectId}}/avaliacao
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"status": "Aprovado",
	"parecer": "Projeto aprovado"
}

### --------------------------
### ATTACHMENTS
### --------------------------

### Criar anexo (público)
POST {{baseURL}}attachments
Content-Type: application/json

{
	"nome": "Arquivo.pdf",
	"url": "http://exemplo/arquivo.pdf",
	"entregavel_id": {{deliverableId}}
}

### Listar anexos
GET {{baseURL}}attachments
Authorization: Bearer {{token}}

### Anexos por etapa
GET {{baseURL}}attachments/etapa-processo/{{processStepId}}
Authorization: Bearer {{token}}

### Anexos por entregável
GET {{baseURL}}attachments/entregavel/{{deliverableId}}
Authorization: Bearer {{token}}

### Buscar anexo
GET {{baseURL}}attachments/{{attachmentId}}
Authorization: Bearer {{token}}

### Atualizar anexo
PUT {{baseURL}}attachments/{{attachmentId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"nome": "Arquivo Atualizado.pdf"
}

### Excluir anexo
DELETE {{baseURL}}attachments/{{attachmentId}}
Authorization: Bearer {{token}}

### --------------------------
### PGA
### --------------------------

### Criar PGA
POST {{baseURL}}pga
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"ano": 2025,
	"unidade_id": {{unitId}}
}

### Listar PGAs
GET {{baseURL}}pga
Authorization: Bearer {{token}}

### Obter PGA por ID
GET {{baseURL}}pga/{{pgaId}}
Authorization: Bearer {{token}}

### Atualizar PGA
PUT {{baseURL}}pga/{{pgaId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"titulo": "PGA Atualizado"
}

### Deletar PGA
DELETE {{baseURL}}pga/{{pgaId}}
Authorization: Bearer {{token}}

### --------------------------
### PROJECT1 (Projetos)
### --------------------------

### Listar projetos
GET {{baseURL}}project1
Authorization: Bearer {{token}}

### Obter projeto por ID
GET {{baseURL}}project1/{{projectId}}
Authorization: Bearer {{token}}

### Criar projeto
POST {{baseURL}}project1
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"codigo_projeto": "P-001",
	"nome_projeto": "Projeto Exemplo",
	"pga_id": {{pgaId}}
}

### Atualizar projeto
PUT {{baseURL}}project1/{{projectId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"nome_projeto": "Projeto Atualizado"
}

### Deletar projeto
DELETE {{baseURL}}project1/{{projectId}}
Authorization: Bearer {{token}}

### --------------------------
### CONFIGURATION
### --------------------------

POST {{baseURL}}priority-action
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"titulo": "Alta Prioridade"
}

GET {{baseURL}}priority-action
Authorization: Bearer {{token}}

POST {{baseURL}}problem-situation
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"titulo": "Problema Exemplo"
}

GET {{baseURL}}problem-situation
Authorization: Bearer {{token}}

POST {{baseURL}}thematic-axis
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"titulo": "Eixo Exemplo"
}

GET {{baseURL}}thematic-axis
Authorization: Bearer {{token}}

POST {{baseURL}}themes
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"titulo": "Tema Exemplo",
	"eixo_id": 1
}

GET {{baseURL}}themes
Authorization: Bearer {{token}}

### --------------------------
### PROCESS-STEP / ROUTINES / PARTICIPANTS
### --------------------------

POST {{baseURL}}process-step
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"titulo": "Etapa X"
}

GET {{baseURL}}process-step
Authorization: Bearer {{token}}

POST {{baseURL}}routine-occurrence
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"descricao": "Ocorrência X"
}

GET {{baseURL}}routine-occurrence
Authorization: Bearer {{token}}

POST {{baseURL}}routine-participant
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"pessoa_id": {{userID}},
	"rotina_id": 1
}

### --------------------------
### PROJECT-PERSON
### --------------------------

POST {{baseURL}}project-person
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"pessoa_id": {{userID}},
	"project_id": {{projectId}}
}

GET {{baseURL}}project-person
Authorization: Bearer {{token}}

### --------------------------
### WORKLOAD HAE
### --------------------------

POST {{baseURL}}workload-hae
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"descricao": "HAE X",
	"horas": 10
}

GET {{baseURL}}workload-hae
Authorization: Bearer {{token}}

### --------------------------
### AUDIT
### --------------------------

POST {{baseURL}}audit/snapshot/pga/{{pgaId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"ano": 2025,
	"usuarioId": {{userID}}
}

GET {{baseURL}}audit/configurations/year/2025
Authorization: Bearer {{token}}

POST {{baseURL}}audit/log
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"tabela": "pessoa",
	"registroId": 1,
	"operacao": "UPDATE",
	"dados_antes": {},
	"dados_depois": {}
}

GET {{baseURL}}audit/history/pessoa/1
Authorization: Bearer {{token}}

### --------------------------
### COURSE
### --------------------------

POST {{baseURL}}course
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"nome": "Desenvolvimento de Software Multiplataforma",
	"codigo": "DSM"
}

GET {{baseURL}}course
Authorization: Bearer {{token}}

### --------------------------
### DELIVERABLES
### --------------------------

POST {{baseURL}}deliverable
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"titulo": "Entregável Exemplo",
	"descricao": "Descrição"
}

GET {{baseURL}}deliverable
Authorization: Bearer {{token}}

### --------------------------
### CPA-ACTION
### --------------------------

POST {{baseURL}}cpa-action
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"titulo": "Ação CPA Exemplo"
}

GET {{baseURL}}cpa-action
Authorization: Bearer {{token}}

### --------------------------
### INSTITUTIONAL ROUTINE
### --------------------------

POST {{baseURL}}institutional-routine
Authorization: Bearer {{token}}
Content-Type: application/json

{
	"titulo": "Rotina X"
}

GET {{baseURL}}institutional-routine
Authorization: Bearer {{token}}
